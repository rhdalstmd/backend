<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬ë§¤ ìš”ì²­ ìˆ˜ì • - ì¤‘ê³ ë§ˆì¼“</title>
    <style>
        /* ì „ì²´ ìŠ¤íƒ€ì¼ ë¦¬ì…‹ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* í—¤ë” */
        .page-header {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin: 24px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 14px;
            color: #6b7280;
        }

        /* ì„¹ì…˜ */
        .section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section.urgent {
            border-left: 4px solid #f59e0b;
        }

        .section.urgent .section-title {
            color: #f59e0b;
        }

        /* í¼ ìš”ì†Œ */
        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 8px;
        }

        .form-label .required {
            color: #ef4444;
            margin-left: 4px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .form-input.error {
            border-color: #ef4444;
        }

        .form-input.success {
            border-color: #10b981;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            background-color: white;
            cursor: pointer;
        }

        .form-error {
            font-size: 12px;
            color: #ef4444;
            margin-top: 4px;
            display: none;
        }

        .form-error.visible {
            display: block;
        }

        .form-success {
            font-size: 12px;
            color: #10b981;
            margin-top: 4px;
            display: none;
        }

        .form-success.visible {
            display: block;
        }

        .form-hint {
            font-size: 12px;
            color: #6b7280;
            margin-top: 4px;
        }

        .char-counter {
            font-size: 12px;
            color: #6b7280;
            text-align: right;
            margin-top: 4px;
        }

        /* ì¸í’‹ ê·¸ë£¹ */
        .input-group {
            display: flex;
            gap: 8px;
        }

        .input-group .form-input {
            flex: 1;
        }

        /* ì´ë¯¸ì§€ ì—…ë¡œë“œ */
        .image-upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            background-color: #f9fafb;
            transition: all 0.2s;
            cursor: pointer;
        }

        .image-upload-area:hover {
            border-color: #3b82f6;
            background-color: #f0f9ff;
        }

        .image-upload-area.dragover {
            border-color: #3b82f6;
            background-color: #dbeafe;
        }

        .upload-icon {
            font-size: 48px;
            color: #9ca3af;
            margin-bottom: 12px;
        }

        .upload-text {
            font-size: 16px;
            color: #4b5563;
            margin-bottom: 8px;
        }

        .upload-hint {
            font-size: 12px;
            color: #6b7280;
        }

        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .image-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #e5e7eb;
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-remove {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 24px;
            height: 24px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        /* ë¼ë””ì˜¤ ê·¸ë£¹ */
        .radio-group {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .radio-item:hover {
            border-color: #3b82f6;
            background-color: #f0f9ff;
        }

        .radio-item.selected {
            border-color: #3b82f6;
            background-color: #dbeafe;
        }

        .radio-item input[type="radio"] {
            margin: 0;
        }

        .radio-item label {
            font-size: 14px;
            color: #4b5563;
            cursor: pointer;
            margin: 0;
        }

        /* ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ */
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #3b82f6;
        }

        .checkbox-item label {
            font-size: 14px;
            color: #4b5563;
            cursor: pointer;
        }

        /* ê°€ê²© ì…ë ¥ */
        .price-input {
            position: relative;
        }

        .price-input .currency {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
            color: #6b7280;
            pointer-events: none;
        }

        .price-input .form-input {
            padding-right: 40px;
        }

        /* ë²„íŠ¼ */
        .btn {
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background-color: #2563eb;
        }

        .btn-secondary {
            background-color: white;
            color: #6b7280;
            border: 1px solid #d1d5db;
        }

        .btn-secondary:hover {
            background-color: #f9fafb;
        }

        .btn-outline {
            background-color: transparent;
            color: #3b82f6;
            border: 1px solid #3b82f6;
        }

        .btn-outline:hover {
            background-color: #f0f9ff;
        }

        .btn-disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-sm {
            padding: 8px 12px;
            font-size: 12px;
        }

        /* ì•¡ì…˜ ë²„íŠ¼ */
        .form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }

        .action-left {
            display: flex;
            gap: 12px;
        }

        .action-right {
            display: flex;
            gap: 12px;
        }

        /* ì•Œë¦¼ */
        .alert {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .alert.visible {
            display: block;
        }

        .alert-success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .alert-error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }

        .alert-warning {
            background-color: #fef3c7;
            color: #92400e;
            border: 1px solid #fcd34d;
        }

        /* ê¸´ê¸‰ í‘œì‹œ */
        .urgent-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background-color: #fef3c7;
            color: #92400e;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }

            .page-header {
                margin: 16px 0;
                padding: 16px;
            }

            .section {
                padding: 16px;
                margin-bottom: 16px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .radio-group {
                flex-direction: column;
            }

            .form-actions {
                flex-direction: column;
            }

            .action-left,
            .action-right {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="page-header">
            <h1 class="page-title">êµ¬ë§¤ ìš”ì²­ ë“±ë¡</h1>
            <p class="page-subtitle">ì›í•˜ëŠ” ìƒí’ˆì˜ êµ¬ë§¤ ìš”ì²­ì„ ìˆ˜ì •í•˜ì„¸ìš”</p>
        </div>

        <form id="buyRequestForm">
            <!-- ì•Œë¦¼ ë©”ì‹œì§€ -->
            <div class="alert alert-success" id="successAlert">
                êµ¬ë§¤ ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.
            </div>
            
            <div class="alert alert-error" id="errorAlert">
                ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
            </div>

            <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ“ ê¸°ë³¸ ì •ë³´</h2>
                
                <div class="form-group">
                    <label for="title" class="form-label">ì œëª©<span class="required">*</span></label>
                    <input type="text" id="title" class="form-input" value="ì•„ì´í° 14 Pro êµ¬ë§¤í•©ë‹ˆë‹¤" placeholder="êµ¬ë§¤í•˜ê³  ì‹¶ì€ ìƒí’ˆì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="50" required>
                    <div class="char-counter">
                        <span id="titleCount">15</span>/50ì
                    </div>
                    <div class="form-error" id="titleError">ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="category" class="form-label">ì¹´í…Œê³ ë¦¬<span class="required">*</span></label>
                        <select id="category" class="form-select" required>
                            <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                            <option value="electronics" selected>ì „ìê¸°ê¸°</option>
                            <option value="fashion">ì˜ë¥˜/íŒ¨ì…˜</option>
                            <option value="beauty">ë·°í‹°/ë¯¸ìš©</option>
                            <option value="home">ìƒí™œìš©í’ˆ</option>
                            <option value="sports">ìŠ¤í¬ì¸ /ë ˆì €</option>
                            <option value="books">ë„ì„œ/ìŒë°˜</option>
                            <option value="toys">ì™„êµ¬/ì·¨ë¯¸</option>
                            <option value="etc">ê¸°íƒ€</option>
                        </select>
                        <div class="form-error" id="categoryError">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</div>
                    </div>

                    <div class="form-group">
                        <label for="budget" class="form-label">í¬ë§ ê°€ê²©<span class="required">*</span></label>
                        <div class="price-input">
                            <input type="number" id="budget" class="form-input" value="850000" placeholder="0" min="1000" max="10000000" required>
                            <span class="currency">ì›</span>
                        </div>
                        <div class="form-hint">1,000ì› ~ 10,000,000ì›</div>
                        <div class="form-error" id="budgetError">í¬ë§ ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ê¸´ê¸‰ë„</label>
                    <div class="radio-group">
                        <div class="radio-item selected">
                            <input type="radio" id="normal" name="urgency" value="normal" checked>
                            <label for="normal">ì¼ë°˜</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="urgent" name="urgency" value="urgent">
                            <label for="urgent">ê¸‰êµ¬ <span class="urgent-badge">ğŸ”¥ ê¸‰êµ¬</span></label>
                        </div>
                    </div>
                    <div class="form-hint">ê¸‰êµ¬ë¡œ ì„¤ì •í•˜ë©´ ë” ë§ì€ íŒë§¤ìì—ê²Œ ë…¸ì¶œë©ë‹ˆë‹¤.</div>
                </div>
            </div>

            <!-- ìƒì„¸ ì„¤ëª… ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ“‹ ìƒì„¸ ì„¤ëª…</h2>
                
                <div class="form-group">
                    <label for="description" class="form-label">êµ¬ë§¤ ìš”ì²­ ë‚´ìš©<span class="required">*</span></label>
                    <textarea id="description" class="form-input form-textarea" placeholder="ì›í•˜ëŠ” ìƒí’ˆì˜ ìƒì„¸ ì¡°ê±´ì„ ì‘ì„±í•´ì£¼ì„¸ìš”&#10;ì˜ˆ: ìƒ‰ìƒ, ìš©ëŸ‰, ìƒíƒœ, êµ¬ë§¤ ì‹œê¸° ë“±" maxlength="1000" required>ì•„ì´í° 14 Pro 128GB ë”¥í¼í”Œ ìƒ‰ìƒìœ¼ë¡œ êµ¬ë§¤í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.
ë°°í„°ë¦¬ ì„±ëŠ¥ 80% ì´ìƒ, ì™¸ê´€ ìƒíƒœ ì–‘í˜¸í•œ ì œí’ˆì„ ì°¾ê³  ìˆìŠµë‹ˆë‹¤.
ë°•ìŠ¤ì™€ ì¶©ì „ê¸° í¬í•¨ì´ë©´ ë” ì¢‹ê² ìŠµë‹ˆë‹¤.
ì§ê±°ë˜ ê°€ëŠ¥í•˜ë©° ë¹ ë¥¸ ê±°ë˜ ì›í•©ë‹ˆë‹¤.</textarea>
                    <div class="char-counter">
                        <span id="descriptionCount">124</span>/1000ì
                    </div>
                    <div class="form-error" id="descriptionError">ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
                </div>
            </div>

            <!-- ì°¸ê³  ì´ë¯¸ì§€ ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ“· ì°¸ê³  ì´ë¯¸ì§€</h2>
                
                <div class="image-upload-area" id="imageUploadArea">
                    <div class="upload-icon">ğŸ“·</div>
                    <div class="upload-text">ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</div>
                    <div class="upload-hint">JPG, PNG íŒŒì¼ (ìµœëŒ€ 3ì¥, ê° 5MB ì´í•˜)</div>
                    <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
                </div>

                <div class="image-preview" id="imagePreview">
                    <div class="image-item">
                        <img src="/placeholder.svg?height=120&width=120&text=iPhone+14+Pro" alt="ì°¸ê³  ì´ë¯¸ì§€ 1">
                        <button type="button" class="image-remove" onclick="removeImage(0)">Ã—</button>
                    </div>
                    <div class="image-item">
                        <img src="/placeholder.svg?height=120&width=120&text=Deep+Purple" alt="ì°¸ê³  ì´ë¯¸ì§€ 2">
                        <button type="button" class="image-remove" onclick="removeImage(1)">Ã—</button>
                    </div>
                </div>
            </div>

            <!-- ê±°ë˜ ì •ë³´ ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ“ ê±°ë˜ ì •ë³´</h2>
                
                <div class="form-group">
                    <label for="location" class="form-label">ê±°ë˜ ì§€ì—­<span class="required">*</span></label>
                    <div class="input-group">
                        <input type="text" id="location" class="form-input" value="ì„œìš¸ì‹œ ê°•ë‚¨êµ¬" placeholder="ê±°ë˜ í¬ë§ ì§€ì—­" required>
                        <button type="button" class="btn btn-outline" onclick="getCurrentLocation()">í˜„ì¬ ìœ„ì¹˜</button>
                    </div>
                    <div class="form-hint">ì§ê±°ë˜ë¥¼ ì›í•˜ëŠ” ì§€ì—­ì„ ì…ë ¥í•˜ì„¸ìš”.</div>
                    <div class="form-error" id="locationError">ê±°ë˜ ì§€ì—­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
                </div>

                <div class="form-group">
                    <label class="form-label">ê±°ë˜ ë°©ì‹<span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="meetup" checked>
                            <label for="meetup">ì§ê±°ë˜</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="delivery" checked>
                            <label for="delivery">íƒë°°ê±°ë˜</label>
                        </div>
                    </div>
                    <div class="form-hint">ì›í•˜ëŠ” ê±°ë˜ ë°©ì‹ì„ ì„ íƒí•˜ì„¸ìš” (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥).</div>
                </div>
            </div>

            <!-- ì—°ë½ì²˜ ì •ë³´ ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ“ ì—°ë½ì²˜ ì •ë³´</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="phone" class="form-label">ì—°ë½ì²˜</label>
                        <input type="tel" id="phone" class="form-input" value="010-1234-5678" placeholder="ì—°ë½ ê°€ëŠ¥í•œ ë²ˆí˜¸">
                        <div class="form-hint">ì—°ë½ì²˜ëŠ” íŒë§¤ìì—ê²Œë§Œ ê³µê°œë©ë‹ˆë‹¤.</div>
                    </div>

                    <div class="form-group">
                        <label for="contactTime" class="form-label">ì—°ë½ ê°€ëŠ¥ ì‹œê°„</label>
                        <select id="contactTime" class="form-select">
                            <option value="anytime" selected>ì–¸ì œë“ ì§€</option>
                            <option value="morning">ì˜¤ì „ (09:00-12:00)</option>
                            <option value="afternoon">ì˜¤í›„ (12:00-18:00)</option>
                            <option value="evening">ì €ë… (18:00-22:00)</option>
                            <option value="weekend">ì£¼ë§ë§Œ</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ì—°ë½ ë°©ë²•</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="chatContact" checked>
                            <label for="chatContact">ì±„íŒ…</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="phoneContact">
                            <label for="phoneContact">ì „í™”</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="messageContact">
                            <label for="messageContact">ë¬¸ì</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í¼ ì•¡ì…˜ ë²„íŠ¼ -->
            <div class="form-actions">
                <div class="action-left">
                    <button type="button" class="btn btn-secondary" onclick="goBack()">ì·¨ì†Œ</button>
                </div>
                <div class="action-right">
                    <button type="button" class="btn btn-outline" onclick="saveDraft()">ì„ì‹œì €ì¥</button>
                    <button type="button" class="btn btn-outline" onclick="previewPost()">ë¯¸ë¦¬ë³´ê¸°</button>
                    <button type="submit" class="btn btn-primary" id="saveButton">ë“±ë¡ ì™„ë£Œ</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        // í¼ ìš”ì†Œë“¤
        const buyRequestForm = document.getElementById('buyRequestForm');
        const titleInput = document.getElementById('title');
        const titleCount = document.getElementById('titleCount');
        const descriptionTextarea = document.getElementById('description');
        const descriptionCount = document.getElementById('descriptionCount');
        const imageUploadArea = document.getElementById('imageUploadArea');
        const imageInput = document.getElementById('imageInput');
        const imagePreview = document.getElementById('imagePreview');
        const saveButton = document.getElementById('saveButton');

        let uploadedImages = [
            '/placeholder.svg?height=120&width=120&text=iPhone+14+Pro',
            '/placeholder.svg?height=120&width=120&text=Deep+Purple'
        ];

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            updateCharCounts();
            setupEventListeners();
        });

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ì œëª© ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸
            titleInput.addEventListener('input', function() {
                updateTitleCount();
                validateTitle();
            });

            // ì„¤ëª… ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸
            descriptionTextarea.addEventListener('input', function() {
                updateDescriptionCount();
                validateDescription();
            });

            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ì—­ í´ë¦­
            imageUploadArea.addEventListener('click', function() {
                imageInput.click();
            });

            // ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ
            imageInput.addEventListener('change', handleImageUpload);

            // ë“œë˜ê·¸ ì•¤ ë“œë¡­
            imageUploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('dragover');
            });

            imageUploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
            });

            imageUploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('dragover');
                const files = e.dataTransfer.files;
                handleImageFiles(files);
            });

            // ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ë§
            document.querySelectorAll('.radio-item').forEach(item => {
                item.addEventListener('click', function() {
                    const radio = this.querySelector('input[type="radio"]');
                    radio.checked = true;
                    updateRadioStyles();
                });
            });

            // í¼ ë³€ê²½ ê°ì§€
            document.querySelectorAll('input, textarea, select').forEach(element => {
                element.addEventListener('input', checkFormChanges);
                element.addEventListener('change', checkFormChanges);
            });
        }

        // ê¸€ì ìˆ˜ ì—…ë°ì´íŠ¸
        function updateCharCounts() {
            updateTitleCount();
            updateDescriptionCount();
        }

        function updateTitleCount() {
            const length = titleInput.value.length;
            titleCount.textContent = length;
            
            if (length > 50) {
                titleCount.style.color = '#ef4444';
            } else {
                titleCount.style.color = '#6b7280';
            }
        }

        function updateDescriptionCount() {
            const length = descriptionTextarea.value.length;
            descriptionCount.textContent = length;
            
            if (length > 1000) {
                descriptionCount.style.color = '#ef4444';
            } else {
                descriptionCount.style.color = '#6b7280';
            }
        }

        // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
        function handleImageUpload(e) {
            const files = e.target.files;
            handleImageFiles(files);
        }

        function handleImageFiles(files) {
            if (uploadedImages.length >= 3) {
                showError('ìµœëŒ€ 3ì¥ê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                return;
            }

            Array.from(files).forEach(file => {
                if (uploadedImages.length >= 3) return;

                // íŒŒì¼ í¬ê¸° ì²´í¬ (5MB)
                if (file.size > 5 * 1024 * 1024) {
                    showError('íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
                    return;
                }

                // íŒŒì¼ í˜•ì‹ ì²´í¬
                if (!file.type.startsWith('image/')) {
                    showError('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedImages.push(e.target.result);
                    updateImagePreview();
                }
                reader.readAsDataURL(file);
            });
        }

        // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
        function updateImagePreview() {
            imagePreview.innerHTML = '';
            
            uploadedImages.forEach((src, index) => {
                const imageItem = document.createElement('div');
                imageItem.className = 'image-item';
                imageItem.innerHTML = `
                    <img src="${src}" alt="ì°¸ê³  ì´ë¯¸ì§€ ${index + 1}">
                    <button type="button" class="image-remove" onclick="removeImage(${index})">Ã—</button>
                `;
                imagePreview.appendChild(imageItem);
            });
        }

        // ì´ë¯¸ì§€ ì‚­ì œ
        function removeImage(index) {
            uploadedImages.splice(index, 1);
            updateImagePreview();
            showSuccess('ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    // ì‹¤ì œë¡œëŠ” ì¢Œí‘œë¥¼ ì£¼ì†Œë¡œ ë³€í™˜í•˜ëŠ” API ì‚¬ìš©
                    document.getElementById('location').value = 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ (í˜„ì¬ ìœ„ì¹˜)';
                    showSuccess('í˜„ì¬ ìœ„ì¹˜ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }, function() {
                    showError('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                });
            } else {
                showError('ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // ë¼ë””ì˜¤ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        function updateRadioStyles() {
            document.querySelectorAll('.radio-item').forEach(item => {
                const radio = item.querySelector('input[type="radio"]');
                if (radio.checked) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });
        }

        // í¼ ìœ íš¨ì„± ê²€ì‚¬
        function validateForm() {
            let isValid = true;

            // ì œëª© ê²€ì‚¬
            if (!validateTitle()) isValid = false;
            
            // ì¹´í…Œê³ ë¦¬ ê²€ì‚¬
            if (!validateCategory()) isValid = false;
            
            // í¬ë§ ê°€ê²© ê²€ì‚¬
            if (!validateBudget()) isValid = false;
            
            // ì„¤ëª… ê²€ì‚¬
            if (!validateDescription()) isValid = false;
            
            // ê±°ë˜ ì§€ì—­ ê²€ì‚¬
            if (!validateLocation()) isValid = false;
            
            // ê±°ë˜ ë°©ì‹ ê²€ì‚¬
            if (!validateTradeMethod()) isValid = false;

            return isValid;
        }

        function validateTitle() {
            const title = titleInput.value.trim();
            const errorElement = document.getElementById('titleError');
            
            if (!title) {
                errorElement.textContent = 'ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                errorElement.classList.add('visible');
                titleInput.classList.add('error');
                return false;
            }
            
            if (title.length > 50) {
                errorElement.textContent = 'ì œëª©ì€ 50ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                errorElement.classList.add('visible');
                titleInput.classList.add('error');
                return false;
            }
            
            errorElement.classList.remove('visible');
            titleInput.classList.remove('error');
            return true;
        }

        function validateCategory() {
            const category = document.getElementById('category').value;
            const errorElement = document.getElementById('categoryError');
            
            if (!category) {
                errorElement.classList.add('visible');
                return false;
            }
            
            errorElement.classList.remove('visible');
            return true;
        }

        function validateBudget() {
            const budget = parseInt(document.getElementById('budget').value);
            const errorElement = document.getElementById('budgetError');
            
            if (!budget || budget < 1000 || budget > 10000000) {
                errorElement.textContent = '1,000ì› ~ 10,000,000ì› ì‚¬ì´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                errorElement.classList.add('visible');
                return false;
            }
            
            errorElement.classList.remove('visible');
            return true;
        }

        function validateDescription() {
            const description = descriptionTextarea.value.trim();
            const errorElement = document.getElementById('descriptionError');
            
            if (!description) {
                errorElement.textContent = 'ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                errorElement.classList.add('visible');
                descriptionTextarea.classList.add('error');
                return false;
            }
            
            if (description.length > 1000) {
                errorElement.textContent = 'ì„¤ëª…ì€ 1000ì ì´í•˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                errorElement.classList.add('visible');
                descriptionTextarea.classList.add('error');
                return false;
            }
            
            errorElement.classList.remove('visible');
            descriptionTextarea.classList.remove('error');
            return true;
        }

        function validateLocation() {
            const location = document.getElementById('location').value.trim();
            const errorElement = document.getElementById('locationError');
            
            if (!location) {
                errorElement.classList.add('visible');
                return false;
            }
            
            errorElement.classList.remove('visible');
            return true;
        }

        function validateTradeMethod() {
            const meetup = document.getElementById('meetup').checked;
            const delivery = document.getElementById('delivery').checked;
            
            if (!meetup && !delivery) {
                showError('ê±°ë˜ ë°©ì‹ì„ ìµœì†Œ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return false;
            }
            
            return true;
        }

        // ë³€ê²½ì‚¬í•­ ê°ì§€
        function checkFormChanges() {
            // ì‹¤ì œë¡œëŠ” í˜„ì¬ í¼ ë°ì´í„°ì™€ ì´ˆê¸° ë°ì´í„°ë¥¼ ë¹„êµ
            const hasChanges = true; // ì„ì‹œë¡œ í•­ìƒ true
            
            if (hasChanges) {
                saveButton.classList.remove('btn-disabled');
                saveButton.disabled = false;
            } else {
                saveButton.classList.add('btn-disabled');
                saveButton.disabled = true;
            }
        }

        // í¼ ì œì¶œ
        buyRequestForm.addEventListener('submit', function(e) {
            e.preventDefault();

            if (!validateForm()) {
                return;
            }

            saveButton.disabled = true;
            saveButton.textContent = 'ìˆ˜ì • ì¤‘...';

            setTimeout(() => {
                showSuccess('êµ¬ë§¤ ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                saveButton.disabled = false;
                saveButton.textContent = 'ìˆ˜ì • ì™„ë£Œ';
            }, 1500);
        });

        // ì„ì‹œì €ì¥
        function saveDraft() {
            showSuccess('ì„ì‹œì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ë¯¸ë¦¬ë³´ê¸°
        function previewPost() {
            if (!validateForm()) {
                return;
            }
            
            showSuccess('ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }

        // ë’¤ë¡œê°€ê¸°
        function goBack() {
            if (confirm('ë³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                history.back();
            }
        }

        // ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜ë“¤
        function showSuccess(message) {
            const alert = document.getElementById('successAlert');
            alert.textContent = message;
            alert.classList.add('visible');
            setTimeout(() => alert.classList.remove('visible'), 3000);
        }

        function showError(message) {
            const alert = document.getElementById('errorAlert');
            alert.textContent = message;
            alert.classList.add('visible');
            setTimeout(() => alert.classList.remove('visible'), 3000);
        }

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                buyRequestForm.dispatchEvent(new Event('submit'));
            }
        });
    </script>
</body>
</html>
